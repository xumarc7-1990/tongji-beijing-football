<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025 征途 · 同济大学北京校友足球队年度数据报告</title>
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 FontAwesome 图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- 引入 Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;700;900&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Noto Sans SC', sans-serif; background-color: #f0f4f8; }
        .tongji-blue { color: #00519E; }
        .bg-tongji-blue { background-color: #00519E; }
        .hero-pattern {
            background-image: radial-gradient(rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        /* 翻转卡片特效 CSS */
        .flip-card {
            background-color: transparent;
            perspective: 1000px;
            cursor: pointer;
            height: 320px;
        }
        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
            border-radius: 1rem;
        }
        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }
        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
        }
        .flip-card-front {
            background-color: white;
            color: #1f2937;
            border: 2px solid #e5e7eb;
        }
        .flip-card-back {
            transform: rotateY(180deg);
            color: white;
        }

        /* 动画定义 */
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin-slow { animation: spin-slow 8s linear infinite; }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up { animation: fadeInUp 1s ease-out forwards; }
    </style>
</head>
<body class="text-gray-800 selection:bg-blue-200">

    <!-- 0. 微信分享抓取专用图 (隐藏) -->
    <div style="display:none;">
        <img src="https://img.zcool.cn/community/016e165d64e9a5a801211d530c0068.jpg@1280w_1l_2o_100sh.jpg" alt="封面图">
    </div>

    <!-- 1. 封面模块：年度数据报告 -->
    <header class="relative bg-tongji-blue text-white overflow-hidden min-h-[700px] flex flex-col justify-center items-center text-center px-4 pt-12 pb-12">
        <div class="absolute inset-0 hero-pattern opacity-20"></div>
        <div class="absolute inset-0 bg-gradient-to-b from-blue-900/80 to-black/60"></div>
        
        <div class="z-10 w-full max-w-5xl mx-auto animate-fade-in-up">
            <h2 class="text-xl md:text-3xl font-black tracking-widest uppercase mb-4 opacity-80 text-blue-200">
                同济大学北京校友足球队
            </h2>
            <h1 class="text-5xl md:text-7xl font-black mb-8 leading-tight drop-shadow-2xl">
                2025年度 <span class="text-yellow-400">数据报告</span>
            </h1>
            <p class="text-lg md:text-2xl max-w-4xl mx-auto mb-12 text-gray-100 font-bold leading-relaxed border-t border-b border-white/20 py-8 bg-black/10 backdrop-blur-sm rounded-lg">
                “没有永远的胜利，只有永远的热爱。<br class="md:hidden">
                <span class="text-yellow-300">奥森的春夏秋冬</span>见证你我的每一次出场，每一场都算数。”
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-white max-w-5xl mx-auto">
                <!-- Group 1: 场次概览 -->
                <div class="bg-white/10 backdrop-blur-md rounded-xl p-5 flex items-center justify-between border border-white/20 hover:bg-white/20 transition duration-300 shadow-lg px-8">
                    <div class="text-left">
                        <div class="text-sm font-bold text-gray-300 uppercase mb-1">年度总场次</div>
                        <div class="text-5xl font-black text-yellow-400 counter" id="header-total-matches">45</div>
                    </div>
                    <div class="text-right flex flex-col justify-center space-y-1 text-sm font-bold border-l border-white/20 pl-6 h-full">
                        <div class="flex items-center justify-end"><span class="w-2 h-2 rounded-full bg-red-400 mr-2"></span>友谊赛 <span id="header-friendly-matches" class="ml-2 text-lg text-white">27</span></div>
                        <div class="flex items-center justify-end"><span class="w-2 h-2 rounded-full bg-green-400 mr-2"></span>内 训 <span id="header-training-matches" class="ml-2 text-lg text-white">18</span></div>
                    </div>
                </div>

                <!-- Group 2: 人气概览 -->
                <div class="bg-white/10 backdrop-blur-md rounded-xl p-5 flex items-center justify-between border border-white/20 hover:bg-white/20 transition duration-300 shadow-lg px-8">
                     <div class="text-left">
                        <div class="text-sm font-bold text-gray-300 uppercase mb-1">出场总人数</div>
                        <div class="flex items-baseline">
                            <span class="text-5xl font-black text-white counter" id="header-total-players">0</span>
                            <span class="ml-1 text-sm opacity-60">人</span>
                        </div>
                    </div>
                    <div class="text-right flex flex-col justify-center h-full border-l border-white/20 pl-6">
                        <div class="text-sm font-bold text-gray-300 uppercase mb-1">累计出勤</div>
                        <div class="font-black text-2xl text-yellow-300"><span class="counter" id="header-total-apps">0</span> <span class="text-xs text-white/60 font-normal">人次</span></div>
                    </div>
                </div>

                <!-- Group 3: 制造进球 -->
                <div class="bg-white/10 backdrop-blur-md rounded-xl p-5 flex items-center justify-between border border-white/20 hover:bg-white/20 transition duration-300 shadow-lg px-8">
                    <div class="text-left">
                        <div class="text-sm font-bold text-gray-300 uppercase mb-1">年度总进球</div>
                        <div class="text-5xl font-black text-red-400 counter" id="header-goals">0</div>
                    </div>
                     <div class="text-right flex flex-col justify-center h-full border-l border-white/20 pl-6">
                        <div class="text-sm font-bold text-gray-300 uppercase mb-1">年度总助攻</div>
                        <div class="font-black text-2xl text-blue-300"><span class="counter" id="header-assists">0</span> <span class="text-xs text-white/60 font-normal">个</span></div>
                    </div>
                </div>
            </div>
            
            <button onclick="document.getElementById('overview').scrollIntoView({behavior: 'smooth'})" class="mt-12 animate-bounce cursor-pointer opacity-70 hover:opacity-100 transition">
                <i class="fas fa-chevron-down text-3xl text-white"></i>
            </button>
        </div>
    </header>

    <!-- 2. 球队概览：友谊赛 vs 娱乐局 (布局调整) -->
    <section id="overview" class="py-16 max-w-7xl mx-auto px-4">
        <h2 class="text-3xl font-bold text-center mb-10 tongji-blue"><i class="fas fa-chart-pie mr-2"></i> 战场分布详情</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- 左侧：友谊赛 -->
            <div class="bg-white rounded-2xl p-8 shadow-lg border-t-4 border-red-500 card-hover transition duration-300 flex flex-col">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <span class="bg-red-500 text-white w-10 h-10 rounded-full flex items-center justify-center mr-3 text-lg"><i class="fas fa-fist-raised"></i></span>
                    对外征战 (友谊赛)
                </h3>
                <div class="flex justify-around text-center mb-6 bg-red-50 p-4 rounded-lg">
                    <div>
                        <div class="text-2xl font-black text-gray-700" id="match-count">27</div>
                        <div class="text-xs text-gray-500">场次</div>
                    </div>
                    <div>
                        <div class="text-2xl font-black text-red-600" id="match-goals">0</div>
                        <div class="text-xs text-gray-500">进球</div>
                    </div>
                    <div>
                        <div class="text-2xl font-black text-red-600" id="match-assists">0</div>
                        <div class="text-xs text-gray-500">助攻</div>
                    </div>
                </div>
                
                <div class="border-t border-gray-100 pt-4 mt-auto">
                    <!-- 评语上移，样式与右侧对齐 -->
                    <p class="text-sm text-gray-600 leading-relaxed bg-gray-50 p-4 rounded mb-4">每一次对外作战的进球都含金量十足，代表了同济校友队的江湖地位。</p>
                    <h4 class="text-xs font-bold text-gray-400 uppercase mb-3">2025 征战对手墙</h4>
                    <div class="flex flex-wrap gap-2" id="opponent-list">
                        <!-- JS 填充 -->
                    </div>
                </div>
            </div>

            <!-- 右侧：娱乐局 -->
            <div class="bg-white rounded-2xl p-8 shadow-lg border-t-4 border-green-500 card-hover transition duration-300 flex flex-col h-full">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <span class="bg-green-500 text-white w-10 h-10 rounded-full flex items-center justify-center mr-3 text-lg"><i class="fas fa-running"></i></span>
                    内部磨砺 (娱乐局)
                </h3>
                <div class="flex justify-around text-center mb-6 bg-green-50 p-4 rounded-lg">
                    <div>
                        <div class="text-2xl font-black text-gray-700" id="training-count">18</div>
                        <div class="text-xs text-gray-500">场次</div>
                    </div>
                    <div>
                        <div class="text-2xl font-black text-green-600" id="training-goals">0</div>
                        <div class="text-xs text-gray-500">进球</div>
                    </div>
                    <div>
                        <div class="text-2xl font-black text-green-600" id="training-assists">0</div>
                        <div class="text-xs text-gray-500">助攻</div>
                    </div>
                </div>
                <div class="mt-4 text-sm text-gray-600 leading-relaxed bg-gray-50 p-4 rounded flex-grow overflow-y-auto">
                    <p>这里是快乐的源泉，也是数据的刷分场。有人在这里重拳出击，有人在这里修身养性。无论比分如何，流下的汗水都是真实的。</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 3. 三巨头：封神榜 (字体大小调整) -->
    <section class="py-16 bg-gray-100">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-8 tongji-blue"><i class="fas fa-trophy mr-2"></i> 2025 赛季 · 核心榜单</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                
                <!-- 射手王 -->
                <div class="bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col">
                    <div class="bg-yellow-500 h-2"></div>
                    <div class="p-4 text-center border-b border-gray-100">
                        <div class="inline-block p-3 rounded-full bg-yellow-100 text-yellow-600 text-3xl mb-2">
                            <i class="fas fa-futbol"></i>
                        </div>
                        <h3 class="text-xl font-bold">金靴奖 (射手王)</h3>
                    </div>
                    <div class="flex-1 grid grid-cols-2 divide-x divide-gray-100">
                        <!-- 真金 -->
                        <div class="p-4">
                            <h4 class="text-center text-lg font-black text-red-500 bg-red-50 py-1 rounded mb-3">真金 (友谊赛)</h4>
                            <div id="scorer-match" class="space-y-3 text-sm"></div>
                        </div>
                        <!-- 镀金 -->
                        <div class="p-4 bg-gray-50">
                            <h4 class="text-center text-lg font-black text-green-600 bg-green-100 py-1 rounded mb-3">镀金 (内部赛)</h4>
                            <div id="scorer-train" class="space-y-3 text-sm"></div>
                        </div>
                    </div>
                </div>

                <!-- 助攻王 (肉饼/菜饼) -->
                <div class="bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col">
                    <div class="bg-blue-500 h-2"></div>
                    <div class="p-4 text-center border-b border-gray-100">
                        <div class="inline-block p-3 rounded-full bg-blue-100 text-blue-600 text-3xl mb-2">
                            <i class="fas fa-hands-helping"></i>
                        </div>
                        <h3 class="text-xl font-bold">做饼大师 (助攻王)</h3>
                    </div>
                    <div class="flex-1 grid grid-cols-2 divide-x divide-gray-100">
                        <!-- 肉饼 -->
                        <div class="p-4">
                            <h4 class="text-center text-lg font-black text-red-500 bg-red-50 py-1 rounded mb-3">肉饼 (友谊赛)</h4>
                            <div id="assist-match" class="space-y-3 text-sm"></div>
                        </div>
                        <!-- 菜饼 -->
                        <div class="p-4 bg-gray-50">
                            <h4 class="text-center text-lg font-black text-green-600 bg-green-100 py-1 rounded mb-3">菜饼 (内部赛)</h4>
                            <div id="assist-train" class="space-y-3 text-sm"></div>
                        </div>
                    </div>
                </div>

                <!-- 铁人奖 -->
                <div class="bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col">
                    <div class="bg-gray-600 h-2"></div>
                    <div class="p-4 text-center border-b border-gray-100">
                        <div class="inline-block p-3 rounded-full bg-gray-200 text-gray-700 text-3xl mb-2">
                            <i class="fas fa-medal"></i>
                        </div>
                        <h3 class="text-xl font-bold">全勤铁人</h3>
                        <p class="text-xs text-gray-400 mt-1">按实际出场次数统计</p>
                    </div>
                    <div class="p-4">
                         <div id="top-apps" class="space-y-3 text-sm"></div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- 4. 趣味榜：互动翻转卡片 (文案更新) -->
    <section class="py-16 max-w-7xl mx-auto px-4">
        <h2 class="text-3xl font-bold text-center mb-4 tongji-blue">
            <i class="fas fa-mask mr-2"></i> 绿茵江湖 · 英雄谱
        </h2>
        <p class="text-center text-gray-500 mb-10 text-sm"><i class="fas fa-hand-pointer animate-bounce mr-1"></i> 点击卡片查看英雄真身</p>
        
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6" id="fun-stats-container">
            <!-- JS 自动生成卡片 -->
        </div>
    </section>

    <!-- 5. 完整数据表 (标题更新 & 默认排序修复) -->
    <section class="py-16 bg-white border-t border-gray-200">
        <div class="max-w-7xl mx-auto px-4">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold tongji-blue">2025同济校友足球数据榜</h2>
                <p class="text-yellow-600 font-bold mt-2 tracking-wide text-lg">2026，期待你上榜</p>
            </div>
            
            <div class="mb-6 flex justify-between items-center flex-wrap gap-4">
                <input type="text" id="search-input" placeholder="搜索球员姓名..." class="border border-gray-300 rounded-lg px-4 py-3 w-full max-w-xs focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm">
                <div class="text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full"><i class="fas fa-info-circle mr-1"></i> 默认按总积分排序</div>
            </div>

            <div class="overflow-x-auto rounded-xl shadow-lg border border-gray-200">
                <table class="min-w-full bg-white">
                    <thead class="bg-gray-50 text-gray-600 text-xs uppercase font-semibold tracking-wider">
                        <tr>
                            <th class="px-6 py-4 text-left cursor-pointer hover:bg-gray-100 transition" onclick="sortTable('name')">姓名 <i class="fas fa-sort text-gray-300 ml-1"></i></th>
                            <th class="px-6 py-4 text-center cursor-pointer hover:bg-gray-100 transition bg-yellow-50" onclick="sortTable('totalScore')">总积分 <i class="fas fa-sort text-gray-500 ml-1"></i></th>
                            <th class="px-6 py-4 text-center cursor-pointer hover:bg-gray-100 transition" onclick="sortTable('totalApps')">总出场 <i class="fas fa-sort text-gray-300 ml-1"></i></th>
                             <th class="px-6 py-4 text-center cursor-pointer hover:bg-red-50 bg-red-50/50 text-red-600 transition" onclick="sortTable('matchGoals')">友谊赛进球 <i class="fas fa-sort text-red-200 ml-1"></i></th>
                            <th class="px-6 py-4 text-center cursor-pointer hover:bg-red-50 bg-red-50/50 text-red-600 transition" onclick="sortTable('matchAssists')">友谊赛助攻 <i class="fas fa-sort text-red-200 ml-1"></i></th>
                            <th class="px-6 py-4 text-center cursor-pointer hover:bg-gray-100 transition text-gray-500" onclick="sortTable('trainingGoals')">内训进球</th>
                             <th class="px-6 py-4 text-center cursor-pointer hover:bg-gray-100 transition text-gray-500" onclick="sortTable('trainingAssists')">内训助攻</th>
                        </tr>
                    </thead>
                    <tbody class="text-gray-700 text-sm divide-y divide-gray-200" id="roster-body">
                        <!-- JS 填充 -->
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <footer class="bg-gray-900 text-gray-400 py-10 text-center text-sm">
        <p class="text-gray-500 mb-2">同济大学北京校友足球队 © 2025</p>
        <p>Generated by AI Assistant</p>
    </footer>

    <!-- ================= 音乐播放器模块 ================= -->
    <audio id="bgm" loop preload="auto">
        <source src="https://music.163.com/song/media/outer/url?id=27589658.mp3" type="audio/mpeg">
    </audio>
    <div id="music-btn" class="fixed top-5 right-5 z-50 w-12 h-12 bg-black/40 backdrop-blur-md rounded-full flex items-center justify-center border border-white/20 cursor-pointer shadow-lg animate-spin-slow hover:bg-black/60 transition">
        <i class="fas fa-music text-white text-lg"></i>
    </div>

    <!-- 逻辑脚本 -->
    <script>
        // --- 0. 常量定义 ---
        const STATS_FRIENDLY_MATCHES = 27; 
        const STATS_TRAINING_MATCHES = 18; 
        const OPPONENTS = [
            "ACE", "公路院", "TD60", "上交北京校友", 
            "南航北京校友", "沈阳实验", "天大校友", 
            "派派", "规划院", "武大校友", "吉林建大", 
            "华电校友", "建研院"
        ];

        // --- 1. 数据源 (校正版) ---
        const rawData = [
            ["王立强", 203.5, 146.5, 22, 18, 21, 57, 12, 8, 13],
            ["许炎彬", 196, 96, 18, 12, 4, 100, 13, 38, 23],
            ["陈巍", 169.8, 85.75, 16, 11.5, 3, 84, 14, 27, 15],
            ["张泽华", 209.5, 100.5, 18, 11, 8, 109, 14, 40, 27],
            ["李惠光", 163, 89, 17, 9, 5, 74, 9, 37, 10],
            ["李欣", 180.5, 105.5, 20, 6, 11, 75, 14, 13, 20],
            ["郑一鸣", 161, 87, 21, 0, 2, 74, 16, 21, 5],
            ["卜征", 145.5, 71.5, 13, 6, 7, 74, 10, 27, 17],
            ["朱新涛", 118.5, 80.5, 13, 14, 5, 38, 7, 10, 7],
            ["周泽林", 107, 74, 11, 11, 9, 33, 5, 9, 9],
            ["胡昊", 81, 52, 13, 0, 0, 29, 9, 2, 0],
            ["刘军伟", 87, 4, 1, 0, 0, 83, 8, 43, 16],
            ["韩金", 44, 28, 7, 0, 0, 16, 5, 1, 0],
            ["张昭", 50.5, 21.5, 5, 0, 1, 29, 5, 7, 7],
            ["杨艳华", 59, 47, 11, 2, 0, 12, 4, 0, 0],
            ["陶卓辉", 40.5, 37.5, 6, 4, 5, 3, 1, 0, 0],
            ["高照宇", 33.5, 33.5, 8, 0, 1, 0, 0, 0, 0],
            ["王泽熙", 39.5, 32.5, 7, 1, 2, 7, 2, 1, 0],
            ["朱永帆", 40.5, 34.5, 6, 6, 1, 6, 2, 0, 0],
            ["郭胜亚", 71, 44, 11, 0, 0, 27, 9, 0, 0],
            ["袁政成", 22.5, 22.5, 3, 6, 1, 0, 0, 0, 0],
            ["洪哲", 38, 12, 3, 0, 0, 26, 7, 5, 0],
            ["冯冠华", 17, 8, 2, 0, 0, 9, 3, 0, 0],
            ["公技善", 18, 18, 3, 2, 2, 0, 0, 0, 0],
            ["张哲", 20, 8, 2, 0, 0, 12, 4, 0, 0],
            ["胡少康", 17, 8, 2, 0, 0, 9, 3, 0, 0],
            ["张凡", 6, 0, 0, 0, 0, 6, 2, 0, 0],
            ["辛纬韬", 5.5, 5.5, 1, 0, 1, 0, 0, 0, 0],
            ["孙道成", 10, 4, 1, 0, 0, 6, 2, 0, 0],
            ["张博文", 19.5, 13.5, 3, 1, 0, 6, 2, 0, 0]
        ];

        // --- 2. 数据处理 ---
        let players = rawData.map(p => ({
            name: p[0],
            totalScore: p[1],
            matchApps: p[3],     
            matchGoals: Math.round(p[4]),
            matchAssists: p[5],
            trainingApps: p[7],  
            trainingGoals: Math.round(p[8]), 
            trainingAssists: p[9],
            totalApps: p[3] + p[7],
            totalGoals: Math.round(p[4]) + Math.round(p[8]),
            totalAssists: p[5] + p[9],
        }));

        // --- 3. 页面初始化 ---
        document.addEventListener('DOMContentLoaded', () => {
            // *** CRITICAL FIX: 默认强制按总积分降序排列 ***
            players.sort((a, b) => b.totalScore - a.totalScore);
            
            renderOverview();
            renderTopCharts();
            renderFunStats();
            renderTable(players); 
            animateNumbers();
            initMusic();
        });

        // --- 4. 音乐播放逻辑 ---
        function initMusic() {
            const audio = document.getElementById('bgm');
            const btn = document.getElementById('music-btn');
            let isPlaying = false;
            function unlockAudio() {
                if (!isPlaying) {
                    audio.play().then(() => {
                        isPlaying = true;
                        btn.style.animationPlayState = 'running';
                        btn.classList.remove('opacity-50');
                    }).catch(e => console.log("Waiting"));
                }
                ['click', 'touchstart'].forEach(evt => document.body.removeEventListener(evt, unlockAudio));
            }
            btn.style.animationPlayState = 'paused';
            btn.classList.add('opacity-50');
            audio.play().then(() => {
                isPlaying = true;
                btn.style.animationPlayState = 'running';
                btn.classList.remove('opacity-50');
            }).catch(() => {
                ['click', 'touchstart'].forEach(evt => document.body.addEventListener(evt, unlockAudio));
            });
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                if (audio.paused) { audio.play(); btn.style.animationPlayState = 'running'; btn.classList.remove('opacity-50'); }
                else { audio.pause(); btn.style.animationPlayState = 'paused'; btn.classList.add('opacity-50'); }
            });
        }

        // --- 5. 渲染：概览 ---
        function renderOverview() {
            const totals = players.reduce((acc, curr) => ({
                goals: acc.goals + curr.totalGoals,
                assists: acc.assists + curr.totalAssists,
                apps: acc.apps + curr.totalApps, 
                mGoals: acc.mGoals + curr.matchGoals,
                mAssists: acc.mAssists + curr.matchAssists,
                tGoals: acc.tGoals + curr.trainingGoals,
                tAssists: acc.tAssists + curr.trainingAssists
            }), { goals:0, assists:0, apps:0, mGoals:0, mAssists:0, tGoals:0, tAssists:0 });

            document.getElementById('header-total-matches').innerText = STATS_FRIENDLY_MATCHES + STATS_TRAINING_MATCHES;
            document.getElementById('header-friendly-matches').innerText = STATS_FRIENDLY_MATCHES;
            document.getElementById('header-training-matches').innerText = STATS_TRAINING_MATCHES;
            const activePlayers = players.filter(p => p.totalScore > 0).length;
            document.getElementById('header-total-players').innerText = activePlayers;
            document.getElementById('header-total-apps').innerText = totals.apps;
            document.getElementById('header-goals').innerText = totals.goals;
            document.getElementById('header-assists').innerText = totals.assists;

            document.getElementById('match-count').innerText = STATS_FRIENDLY_MATCHES;
            document.getElementById('match-goals').innerText = totals.mGoals;
            document.getElementById('match-assists').innerText = totals.mAssists;
            document.getElementById('training-count').innerText = STATS_TRAINING_MATCHES;
            document.getElementById('training-goals').innerText = totals.tGoals;
            document.getElementById('training-assists').innerText = totals.tAssists;

            const oppContainer = document.getElementById('opponent-list');
            oppContainer.innerHTML = OPPONENTS.map(opp => 
                `<span class="bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs font-medium border border-gray-200">vs ${opp}</span>`
            ).join('');
        }

        // --- 6. 渲染：分列排行榜 (字号微调: header>sub>content) ---
        function renderTopCharts() {
            const renderList = (data, valueKey, containerId, colorClass) => {
                const sorted = [...data].sort((a,b) => b[valueKey] - a[valueKey]);
                let groupedData = [];
                if (sorted.length > 0) {
                    let currentRank = 1;
                    let currentScore = sorted[0][valueKey];
                    let currentNames = [sorted[0].name];
                    for (let i = 1; i < sorted.length; i++) {
                        if (sorted[i][valueKey] === 0) break;
                        if (sorted[i][valueKey] === currentScore) {
                            currentNames.push(sorted[i].name);
                        } else {
                            groupedData.push({ rank: currentRank, names: currentNames, score: currentScore });
                            currentRank += currentNames.length;
                            currentScore = sorted[i][valueKey];
                            currentNames = [sorted[i].name];
                        }
                    }
                    if (currentScore > 0) groupedData.push({ rank: currentRank, names: currentNames, score: currentScore });
                }

                let displayHtml = groupedData.slice(0, 5).map((g) => `
                    <div class="flex justify-between items-start py-3 border-b border-gray-100 last:border-0">
                        <div class="flex items-start w-full">
                            <span class="w-6 text-sm font-bold mt-1 ${g.rank<=3 ? 'text-yellow-600' : 'text-gray-400'}">${g.rank}.</span>
                            <div class="flex flex-wrap gap-x-3 gap-y-1">
                                ${g.names.map(n => `<span class="text-sm font-bold text-gray-800 whitespace-nowrap">${n}</span>`).join('')}
                            </div>
                        </div>
                        <span class="font-black text-base ${colorClass} ml-2">${g.score}</span>
                    </div>
                `).join('');
                document.getElementById(containerId).innerHTML = displayHtml;
            };

            renderList(players, 'matchGoals', 'scorer-match', 'text-red-600');
            renderList(players, 'trainingGoals', 'scorer-train', 'text-green-600');
            renderList(players, 'matchAssists', 'assist-match', 'text-red-600');
            renderList(players, 'trainingAssists', 'assist-train', 'text-green-600');
            renderList(players, 'totalApps', 'top-apps', 'text-gray-800');
        }

        // --- 7. 渲染：趣味卡片 (文案更新) ---
        function renderFunStats() {
            const container = document.getElementById('fun-stats-container');
            const find = (name) => players.find(p => p.name === name) || {matchGoals:0, matchAssists:0, trainingGoals:0, trainingAssists:0, totalApps:0, matchApps:0};
            
            const cardsData = [
                {
                    title: "外战硬汉",
                    icon: "fas fa-shield-alt",
                    bg: "bg-red-600",
                    name: "王立强",
                    data: `友谊赛：${find("王立强").matchGoals}球 / ${find("王立强").matchAssists}助`,
                    desc: "内战唯唯诺诺，外战重拳出击。真正的狠人，从来不杀熟。"
                },
                {
                    title: "效率之王",
                    icon: "fas fa-stopwatch",
                    bg: "bg-yellow-500",
                    name: "朱新涛",
                    data: `友谊赛：${find("朱新涛").matchApps}场 / ${find("朱新涛").matchGoals}球`,
                    desc: "虽然来得不是最多，但只要他上场，就是对手噩梦的开始。"
                },
                {
                    title: "内战之神 No.1",
                    icon: "fas fa-ghost",
                    bg: "bg-green-600",
                    name: "刘军伟",
                    data: `内训：${find("刘军伟").trainingGoals}球 / ${find("刘军伟").trainingAssists}助`,
                    desc: "训练场上的C罗，进球如麻。队友纷纷表示：还是当对手吧，防不住。"
                },
                {
                    title: "内战之神 No.2",
                    icon: "fas fa-running",
                    bg: "bg-green-500",
                    name: "张泽华",
                    data: `内训：${find("张泽华").trainingGoals}球 / ${find("张泽华").trainingAssists}助`,
                    desc: "奥森的草皮都快被他跑秃了。不是在进球，就是在冲刺进球的路上。"
                },
                {
                    title: "中场领袖",
                    icon: "fas fa-anchor",
                    bg: "bg-blue-600",
                    name: "胡昊",
                    data: `总出勤：${find("胡昊").totalApps}场`,
                    desc: "场上指挥官，xjbt最严厉的教练。"
                },
                {
                    title: "门神",
                    icon: "fas fa-hands",
                    bg: "bg-purple-600",
                    name: "郑一鸣",
                    data: `内训造${find("郑一鸣").trainingGoals+find("郑一鸣").trainingAssists}球`,
                    desc: "队内老大哥，却有着18岁的反应；金手套，也没少进球助攻。"
                },
                {
                    title: "最佳外援",
                    icon: "fas fa-plane-arrival",
                    bg: "bg-indigo-500",
                    name: "杨艳华",
                    data: "前腰 / 技术流",
                    desc: "技术扶贫到位，中场梳理清晰。群众呼声极其一致：建议足协尽快归化！"
                },
                {
                    title: "最佳新人",
                    icon: "fas fa-user-graduate",
                    bg: "bg-pink-500",
                    name: "郭胜亚",
                    data: "后卫 / 铁闸",
                    desc: "防守强硬，能跑能抗。后防线的大哥们看着他，满眼都是自己20岁的影子。"
                }
            ];

            container.innerHTML = cardsData.map(c => `
                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <i class="${c.icon} text-4xl mb-4 text-gray-300"></i>
                            <h3 class="text-2xl font-black text-tongji-blue tracking-widest">${c.title}</h3>
                            <div class="mt-4 text-xs text-gray-400 animate-pulse">点击翻转</div>
                        </div>
                        <div class="flip-card-back ${c.bg}">
                            <div class="absolute top-4 left-0 w-full text-center text-xl font-bold opacity-100 uppercase tracking-widest">${c.title}</div>
                            <h3 class="text-xl font-bold mb-1 mt-6">${c.name}</h3>
                            <div class="text-base font-medium mb-4 opacity-90 border-b border-white/20 pb-2">${c.data}</div>
                            <p class="text-sm italic leading-relaxed px-2">"${c.desc}"</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // --- 8. 渲染：表格 ---
        function renderTable(data) {
            const tbody = document.getElementById('roster-body');
            tbody.innerHTML = data.map(p => `
                <tr class="hover:bg-gray-50 transition-colors">
                    <td class="px-6 py-4 font-bold text-gray-900">${p.name}</td>
                    <td class="px-6 py-4 text-center font-bold text-blue-800 bg-yellow-50">${p.totalScore}</td>
                    <td class="px-6 py-4 text-center text-gray-800 font-bold">${p.totalApps}</td>
                    <td class="px-6 py-4 text-center bg-red-50 text-red-600 font-medium">${p.matchGoals}</td>
                    <td class="px-6 py-4 text-center bg-red-50 text-red-600 font-medium">${p.matchAssists}</td>
                    <td class="px-6 py-4 text-center text-gray-400">${p.trainingGoals}</td>
                    <td class="px-6 py-4 text-center text-gray-400">${p.trainingAssists}</td>
                </tr>
            `).join('');
        }

        // 搜索 & 排序
        document.getElementById('search-input').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            renderTable(players.filter(p => p.name.toLowerCase().includes(term)));
        });

        let sortDir = -1; // Default desc because initial sort is desc
        function sortTable(key) {
            sortDir *= -1;
            const sorted = [...players].sort((a,b) => {
                if (key === 'name') return sortDir === 1 ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name);
                return sortDir === 1 ? a[key] - b[key] : b[key] - a[key];
            });
            renderTable(sorted);
        }

        function animateNumbers() {
            const counters = document.querySelectorAll('.counter');
            counters.forEach(counter => {
                const target = +counter.innerText;
                const increment = target / 40;
                let current = 0;
                const update = () => {
                    current += increment;
                    if (current < target) {
                        counter.innerText = Math.ceil(current);
                        requestAnimationFrame(update);
                    } else {
                        counter.innerText = target;
                    }
                };
                update();
            });
        }
    </script>
</body>
</html>
